apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: spotlight

images:
  - name: flight-spotlight
    newName: registry.digitalocean.com/utmtest/flight-spotlight:latest

# namePrefix: "spotlight-"

generatorOptions:
  disableNameSuffixHash: true # this flag is used to avoid creation of new configmap, instead it will be modified when file context is changed

configMapGenerator:
  - name: redis-config
    files:
      - redis.conf
  - name: env
    envs:
      - .env

secretGenerator:
  - name: env-secrets
    envs:
      - .env

resources:
  - resources/namespace.yaml
  - resources/web.yaml
  - resources/web-service.yaml
  - resources/tile38.yaml
  - resources/tile38-service.yaml
  - resources/redis.yaml
  - resources/redis-service.yaml
